!function(){"use strict";function t(t){var e,n,o=t.url||"",r=(t.type||t.method||"get").toLowerCase(),s=t.data||null,i=t.contentType||"",c=t.dataType||"",u=void 0===t.async||t.async,a=t.timeOut,f=t.before||function(){},p=t.error||function(){},d=t.success||function(){},l=t.complete||function(){},m=!1,y=null,w=null;return function(){"function"==typeof s&&(s=s());if(/\bjson\b/.test(i)||"json"===r)j(),s=JSON.stringify(s),r="post";else if(s){if("string"==typeof s)s=function(t){for(var e=t.split("&"),n=0,o=e.length;n<o;n++){var r=encodeURIComponent(e[n].split("=")[0]),s=encodeURIComponent(e[n].split("=")[1]);"null"!=s&&"undefined"!=s&&s&&(e[n]=r+"="+s)}return e}(s);else{if("get"!==r&&"object"==typeof s&&function(t){for(var e in t)if(t[e]&&"[object File]"===Object.prototype.toString.call(t[e]))return!0;return!1}(s))return s=function(){var t=new FormData;for(var e in s)s[e]&&t.append(e,s[e]);return t}(),void(r="formPost");if("get"!==r&&s instanceof FormData)return void(r="formPost");"object"==typeof s&&(j(),s=b(s))}s=s.join("&").replace("/%20/g","+"),"get"!==r&&"jsonp"!==c||(o+=o.indexOf("?")>-1?o.indexOf("=")>-1?"&"+s:s:"?"+s)}}(),"jsonp"===c?(e=document.createElement("script"),n="JSONP_"+(new Date).getTime()+Math.round(1e3*Math.random()),e.src=o+(o.indexOf("?")>-1?"&":"?")+"callback="+n,e.type="text/javascript",f(),document.body.appendChild(e),g(n,e),new Promise((t,o)=>{window[n]=function(n){clearTimeout(y),document.body.removeChild(e),d(n),t(n)}})):function(){(w=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;for(var t=["Microsoft","msxm3","msxml2","msxml1"],e=0;e<t.length;e++)try{var n=t[e]+".XMLHTTP";return new ActiveXObject(n)}catch(t){}}()).open(r,o,u),"post"!==r||"formPost"===r||i?i&&w.setRequestHeader("Content-Type",i):w.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");w.setRequestHeader("X-Requested-With","XMLHttpRequest");var t="get"===r?null:s;return f(t),new Promise((e,n)=>{w.onreadystatechange=function(){if(4===w.readyState){if(w=function(t){var e={};e.responseURL=t.responseURL,e.statusText=t.statusText,e.withCredentials=t.withCredentials,e.responseText=t.responseText,e.status=t.status,e.contentType=t.getResponseHeader("Content-Type");var n=e.responseText;if(/\bjson\b/.test(e.contentType))try{e.response=JSON.parse(n)}catch(t){e.response=n,e.statusText="json parse error"}return e}(w),void 0!==a){if(m)return;clearTimeout(y)}w.status>=200&&w.status<300||304==w.status?(d(w.response),l(w),e(w.response)):(p(w),l(w),n(w))}},w.send(t),g()})}();function j(){if(s instanceof FormData){var t={};s.forEach(function(e,n){e&&(t[n]=e)}),s=t}}function v(t,e,n){var o=[];return t=void 0===n?t:-1!=n.indexOf("[")?n+"."+t:n+"["+t+"]","object"==typeof e&&null!==e?o=o.concat(b(e,t)):(t=encodeURIComponent(t),"null"!=(e=encodeURIComponent(e))&&"undefined"!=e&&e&&o.push(t+"="+e)),o}function b(t,e){var n,o=[];if("[object Array]"==Object.prototype.toString.call(t))for(var r=0,s=t.length;r<s;r++)n=t[r],o=o.concat(v("object"==typeof n?r:"",n,e));else if("[object Date]"==Object.prototype.toString.call(t))console.warn("found date type:"+e+",do not use!"),o=o.concat(v(e,t.toDateString()));else if("[object Object]"==Object.prototype.toString.call(t))for(var i in t)n=t[i],o=o.concat(v(i,n,e));return o}function g(t,e){void 0!==a&&(y=setTimeout(function(){"jsonp"===c?(delete window[t],document.body.removeChild(e)):(m=!0,w&&w.abort()),console.log("timeout")},a))}}const e=function(e,n,o){return"function"==typeof n&&(o=o||n,n=null),t({url:e,method:"POST",data:n,success:o})},n=function(e,n,o){return"function"==typeof n&&(o=o||n,n=null),t({url:e,method:"get",data:n,success:o})},o=function(e,n,o){return"function"==typeof n&&(o=o||n,n=null),t({url:e,method:"POST",data:n,success:o,contentType:"application/json; charset=utf-8"})};"undefined"!=typeof module&&module.exports?module.exports={ajax:t,get:n,post:e,postJson:o}:(window.ajax=t,window.get=n,window.post=e,window.postJson=o)}();